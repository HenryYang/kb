<!DOCTYPE html>
<html lang="en" itemscope="" itemtype="http://schema.org/WebPage">
    <head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property="og:title" content="macOS CLI / macOS 指令" />
<meta property="og:description" content="顯示從 Keychain 匯出的 .p12 中的公私鑰 openssl pkcs12 -info -in INFILE.p12 -nodes 憑證格式相關資訊
 在 CLI 匯入憑證到 Keychain # 解鎖 Keychain security unlock-keychain -p 電腦的密碼 ~/Library/Keychains/login.keychain-db # 匯入公私鑰 security import 要匯入的憑證 -k ~/Library/Keychains/login.keychain-db  手動安裝 Xcode # 去 Apple Developer 網站下載 xip 格式的 Xcode (現在需要登入才能下載) https://developer.apple.com/download/more/ # 使用 xip 指令直接安裝 xip -x ~/Download/Xcode_12.xip  執行 macOS 取消到期通知指令 sudo defaults write /Library/Preferences/com.apple.loginwindow PasswordExpirationDays 0  手動把帳戶加入 Mobile Account 方法 sudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -P -v -n 使用者帳戶  手動更新 FileVault2 的開機解鎖密碼 sudo diskutil apfs changePassphrase disk1s1 -user $(sudo fdesetup list | grep id -un | awk -F&#39;,&#39; &#39;{print $2}&#39;)  macOS Network Location 設定檔存放位置 /Library/Preferences/SystemConfiguration/preferences." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kb.hiy.tw/os/mac/macos_cli/" />
<meta property="article:published_time" content="2020-07-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-10-30T10:17:24+08:00" />
<meta itemprop="name" content="macOS CLI / macOS 指令">
<meta itemprop="description" content="顯示從 Keychain 匯出的 .p12 中的公私鑰 openssl pkcs12 -info -in INFILE.p12 -nodes 憑證格式相關資訊
 在 CLI 匯入憑證到 Keychain # 解鎖 Keychain security unlock-keychain -p 電腦的密碼 ~/Library/Keychains/login.keychain-db # 匯入公私鑰 security import 要匯入的憑證 -k ~/Library/Keychains/login.keychain-db  手動安裝 Xcode # 去 Apple Developer 網站下載 xip 格式的 Xcode (現在需要登入才能下載) https://developer.apple.com/download/more/ # 使用 xip 指令直接安裝 xip -x ~/Download/Xcode_12.xip  執行 macOS 取消到期通知指令 sudo defaults write /Library/Preferences/com.apple.loginwindow PasswordExpirationDays 0  手動把帳戶加入 Mobile Account 方法 sudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -P -v -n 使用者帳戶  手動更新 FileVault2 的開機解鎖密碼 sudo diskutil apfs changePassphrase disk1s1 -user $(sudo fdesetup list | grep id -un | awk -F&#39;,&#39; &#39;{print $2}&#39;)  macOS Network Location 設定檔存放位置 /Library/Preferences/SystemConfiguration/preferences.">
<meta itemprop="datePublished" content="2020-07-07T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-10-30T10:17:24+08:00" />
<meta itemprop="wordCount" content="246">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="macOS CLI / macOS 指令"/>
<meta name="twitter:description" content="顯示從 Keychain 匯出的 .p12 中的公私鑰 openssl pkcs12 -info -in INFILE.p12 -nodes 憑證格式相關資訊
 在 CLI 匯入憑證到 Keychain # 解鎖 Keychain security unlock-keychain -p 電腦的密碼 ~/Library/Keychains/login.keychain-db # 匯入公私鑰 security import 要匯入的憑證 -k ~/Library/Keychains/login.keychain-db  手動安裝 Xcode # 去 Apple Developer 網站下載 xip 格式的 Xcode (現在需要登入才能下載) https://developer.apple.com/download/more/ # 使用 xip 指令直接安裝 xip -x ~/Download/Xcode_12.xip  執行 macOS 取消到期通知指令 sudo defaults write /Library/Preferences/com.apple.loginwindow PasswordExpirationDays 0  手動把帳戶加入 Mobile Account 方法 sudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -P -v -n 使用者帳戶  手動更新 FileVault2 的開機解鎖密碼 sudo diskutil apfs changePassphrase disk1s1 -user $(sudo fdesetup list | grep id -un | awk -F&#39;,&#39; &#39;{print $2}&#39;)  macOS Network Location 設定檔存放位置 /Library/Preferences/SystemConfiguration/preferences."/>


<meta property="description" content='顯示從 Keychain 匯出的 .p12 中的公私鑰 openssl pkcs12 -info -in INFILE.p12 -nodes 憑證格式相關資訊
 在 CLI 匯入憑證到 Keychain # 解鎖 Keychain security unlock-keychain -p 電腦的密碼 ~/Library/Keychains/login.keychain-db # 匯入公私鑰 security import 要匯入的憑證 -k ~/Library/Keychains/login.keychain-db  手動安裝 Xcode # 去 Apple Developer 網站下載 xip 格式的 Xcode (現在需要登入才能下載) https://developer.apple.com/download/more/ # 使用 xip 指令直接安裝 xip -x ~/Download/Xcode_12.xip  執行 macOS 取消到期通知指令 sudo defaults write /Library/Preferences/com.apple.loginwindow PasswordExpirationDays 0  手動把帳戶加入 Mobile Account 方法 sudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -P -v -n 使用者帳戶  手動更新 FileVault2 的開機解鎖密碼 sudo diskutil apfs changePassphrase disk1s1 -user $(sudo fdesetup list | grep id -un | awk -F&#39;,&#39; &#39;{print $2}&#39;)  macOS Network Location 設定檔存放位置 /Library/Preferences/SystemConfiguration/preferences.' /><meta name="author" content="Henry Yang">



<title>macOS CLI / macOS 指令 | Henry&#39;s Knowledge Base</title>

<link rel="canonical" href="https://kb.hiy.tw/os/mac/macos_cli/">




 



<link rel="stylesheet" href="https://kb.hiy.tw/css/all.min.4a45a7ed7d7dd5b16e4cd2f3bf71a6acb00b4c69bdbb1516f431bbfdf6629067.css" integrity="sha256-SkWn7X191bFuTNLzv3GmrLALTGm9uxUW9DG7/fZikGc=">













</head>
    <body>
	<meta itemprop="url" content="https://kb.hiy.tw/os/mac/macos_cli/" /><nav class="navbar navbar-dark fixed-top bg-danger flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-sm-3 col-md-3 mr-0 text-center " href="https://kb.hiy.tw/">Henry&#39;s Knowledge Base</a>
</nav>


<div class="container-fluid mt-3">
    <div class="row">

	

        <main role="main" class="col-md-9 ml-sm-auto col-lg-9 px-4">
            
	    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">macOS CLI / macOS 指令</h1>
</div>



<div class="text-center">
    
    
    <div class="d-flex justify-content-center text-muted">
	<small>
	    <i class="fas fa-clock"></i> <strong>Published:</strong>
	    
	    <time datetime="2020-07-07T00:00:00&#43;00:00">7 Jul, 2020</time>
	    
	    </small>
	<small class="mx-3">
	    
	    <div class="ml-2">
		<i class="fas fa-edit"></i> <strong>Last modified:</strong> <time datetime="2021-10-30T10:17:24&#43;08:00">October 30, 2021</time>
	    </div>
	    
	</small>
	
    </div>
    
</div>


	    
	    <h5 id="顯示從-keychain-匯出的-p12-中的公私鑰">顯示從 Keychain 匯出的 .p12 中的公私鑰</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">openssl pkcs12 -info -in INFILE.p12 -nodes
</code></pre></div><p><a href="https://support.ssl.com/index.php?/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them">憑證格式相關資訊</a></p>
</br>
<h5 id="在-cli-匯入憑證到-keychain">在 CLI 匯入憑證到 Keychain</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 解鎖 Keychain</span>
security unlock-keychain -p 電腦的密碼 ~/Library/Keychains/login.keychain-db

<span style="color:#75715e"># 匯入公私鑰</span>
security import 要匯入的憑證 -k ~/Library/Keychains/login.keychain-db
</code></pre></div></br>
<h5 id="手動安裝-xcode">手動安裝 Xcode</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 去 Apple Developer 網站下載 xip 格式的 Xcode (現在需要登入才能下載)</span>
https://developer.apple.com/download/more/

<span style="color:#75715e"># 使用 xip 指令直接安裝</span>
xip -x ~/Download/Xcode_12.xip

</code></pre></div></br>
<h5 id="執行-macos-取消到期通知指令">執行 macOS 取消到期通知指令</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo defaults write /Library/Preferences/com.apple.loginwindow PasswordExpirationDays <span style="color:#ae81ff">0</span>
</code></pre></div></br>
<h5 id="手動把帳戶加入-mobile-account-方法">手動把帳戶加入 Mobile Account 方法</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -P -v -n 使用者帳戶
</code></pre></div></br>
<h5 id="手動更新-filevault2-的開機解鎖密碼">手動更新 FileVault2 的開機解鎖密碼</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo diskutil apfs changePassphrase disk1s1 -user <span style="color:#66d9ef">$(</span>sudo fdesetup list | grep id -un | awk -F<span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#e6db74">&#39;{print $2}&#39;</span><span style="color:#66d9ef">)</span>
</code></pre></div></br>
<h5 id="macos-network-location-設定檔存放位置">macOS Network Location 設定檔存放位置</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">/Library/Preferences/SystemConfiguration/preferences.plist
</code></pre></div></br>
<h5 id="讓-terminal-的-sudo-可以使用-touch-id-驗證">讓 Terminal 的 sudo 可以使用 Touch ID 驗證</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#在 /etc/pam.d/sudo 裡面加上下面這一行</span>
auth sufficient pam_tid.so
</code></pre></div></br>
<h5 id="重起-touch-bar-的服務">重起 Touch Bar 的服務</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo pkill TouchBarServer
sudo killall <span style="color:#e6db74">&#34;ControlStrip&#34;</span>
</code></pre></div></br>
<h5 id="允許-macos-安裝任何來源軟體危險風險自負">允許 macOS 安裝任何來源軟體（危險，風險自負）</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo spctl --master-disable
</code></pre></div></br>
<h5 id="擴充找回未使用的硬碟空間">擴充（找回）未使用的硬碟空間</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 查看目前要擴充的磁碟代號</span>
sudo diskutil list

<span style="color:#75715e"># 先修復目標擴充的磁碟這邊以 disk0 為例</span>
sudo diskutil repairDisk disk0

<span style="color:#75715e"># 將 disk0s2 擴充成為 200GB 硬碟</span>
sudo diskutil resizeVolume disk0s2 200G

<span style="color:#75715e"># 如果是 AFPS 格式磁碟請改成下面指令</span>
sudo diskutil apfs resizeContainer disk0s2 200G


</code></pre></div></br>
<h5 id="在根目錄建立超連結到其他路徑上">在根目錄建立超連結到其他路徑上</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 請參考 https://derflounder.wordpress.com/2020/01/18/creating-root-level-directories-and-symbolic-links-on-macos-catalina/</span>
sudo nano /etc/synthetic.conf
<span style="color:#75715e"># 然後該檔案請依照下面方式編輯，中間是 tab 不能是空白</span>
<span style="color:#75715e"># bar 那邊是預期的資料夾名稱，而 tab 後面則是路徑，記得第一個 / 不需要加</span>
bar     System/Volumes/Data/bar
</code></pre></div></br>
<h5 id="製作-macos-monterey-安裝隨身碟">製作 macOS Monterey 安裝隨身碟</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo /Applications/Install<span style="color:#ae81ff">\ </span>macOS<span style="color:#ae81ff">\ </span>Monterey.app/Contents/Resources/createinstallmedia --volume /Volumes/&lt;隨身碟名稱&gt;
</code></pre></div><p><a href="https://support.apple.com/zh-tw/HT201372">各版本指令與下載連結</a></p>
</br>
<h5 id="解決-mac-appstore-下載轉圈圈不停問題">解決 Mac AppStore 下載轉圈圈不停問題</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kill -9 <span style="color:#66d9ef">$(</span>ps -A | grep appstoreagent | awk <span style="color:#e6db74">&#39;{print $1}&#39;</span> | head -1<span style="color:#66d9ef">)</span>
</code></pre></div></br>
<h5 id="掛載-ext4-磁碟">掛載 Ext4 磁碟</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 需要安裝軟體</span>
brew install --cask osxfuse
brew install ext4fuse

<span style="color:#75715e"># 查詢要掛載的磁碟所在分割區</span>
diskutil list

<span style="color:#75715e"># 掛載磁碟，以 disk3s1 為例，掛載到家目錄的 MY_DISK</span>
sudo ext4fuse /dev/disk3s1 ~/MY_DISK -o allow_other
</code></pre></div></br>
<h5 id="解決-homebrew-找不到-formulae-問題">解決 homebrew 找不到 Formulae 問題</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">rm -rf /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core; brew update
</code></pre></div>
	    

	    
	    <div class="comments">
		
	    </div>

	    
<hr>
<div>
    <nav aria-label="Article quick navigation">
	<ul class="pagination justify-content-center">
	    
	    <li class="page-item">
		<a class="page-link" href="https://kb.hiy.tw/os/mac/macos_debug/" title="MacOS Debug / MacOS 除錯設定">Previous</a>
	    </li>
	    

	    
	    <li class="page-item">
		<a class="page-link" href="https://kb.hiy.tw/os/mac/macos_useful/" title="MacOS Useful Tips / MacOS 實用經驗">Next</a>
	    </li>
	    
	</ul>
    </nav>
</div>
<hr>



	    <div class="top-border p-3 mb-2 bg-light">
		<div>
    <ul>
	
	<h4>Articles</h4>
	
<ul>
    
    
    <li><a href="https://kb.hiy.tw/os/mac/macos_useful/">MacOS Useful Tips / MacOS 實用經驗</a><span><small class="mx-1 text-muted">December 8, 2021</small></span></li>
    
    
    
    <li>macOS CLI / macOS 指令</li>
    
    
    
    <li><a href="https://kb.hiy.tw/os/mac/macos_debug/">MacOS Debug / MacOS 除錯設定</a><span><small class="mx-1 text-muted">July 7, 2020</small></span></li>
    
    
    
    <li><a href="https://kb.hiy.tw/os/mac/mac_2hand/">Check list for Used Mac Device / 二手蘋果電腦驗機方式</a><span><small class="mx-1 text-muted">July 6, 2018</small></span></li>
    
    
</ul>

	
	<hr>
	
	
	
    </ul>
</div>





	    </div>
	    
	    









<nav aria-label="breadcrumb">
    <ol class="breadcrumb border border-secondary" itemprop="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
	











<li class="breadcrumb-item "
    
    itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem">
    
    <a href="https://kb.hiy.tw/"
       itemprop="item">
	<span itemprop="name">Knowledge Base</span>
    </a>
    
    <meta itemprop="position" content="1" />
</li>


<li class="breadcrumb-item "
    
    itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem">
    
    <a href="https://kb.hiy.tw/os/"
       itemprop="item">
	<span itemprop="name">A. OS/作業系統</span>
    </a>
    
    <meta itemprop="position" content="2" />
</li>


<li class="breadcrumb-item "
    
    itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem">
    
    <a href="https://kb.hiy.tw/os/mac/"
       itemprop="item">
	<span itemprop="name">macOS</span>
    </a>
    
    <meta itemprop="position" content="3" />
</li>


<li class="breadcrumb-item  active"
    aria-current="page"
    itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem">
    
	<span itemprop="name">macOS CLI / macOS 指令</span>
    
    <meta itemprop="position" content="4" />
</li>

  </ol>
</nav>




	    <div class="mt-3"><footer class="container-fluid site-footer py-3">

</footer>
<div class="si-license">
  <div class="text-muted text-sm-center">
	Henry Yang<small>© 2020</small> &middot; 
  </div>
</div>


</div>
	    
        </main>
    </div>
</div>









<script async src="/js/bundle.min.58c1a372888b06db260026e21bb373955061138b81181b5248eb0a5f94e82b5f1f500a5d40ffa85135bb4ef838a53013ca6d3f85ee39c023de90e6149aac4d6b.js" integrity="sha512-WMGjcoiLBtsmACbiG7NzlVBhE4uBGBtSSOsKX5ToK18fUApdQP&#43;oUTW7Tvg4pTATym0/he45wCPekOYUmqxNaw=="></script>

</body>
</html>
